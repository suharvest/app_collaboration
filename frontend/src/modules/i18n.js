/**
 * i18n - Internationalization Module
 * Supports Chinese (zh) and English (en)
 */

const translations = {
  en: {
    app: {
      title: 'SenseCraft Solution',
    },
    nav: {
      solutions: 'Solutions',
      devices: 'Devices',
      deployments: 'Deployments',
      management: 'Management',
      settings: 'System Settings',
    },
    solutions: {
      title: 'Available Solutions',
      empty: 'No solutions available',
      emptyDescription: 'Add solution configurations to the solutions directory',
      difficulty: {
        beginner: 'Beginner',
        intermediate: 'Intermediate',
        advanced: 'Advanced',
      },
      estimatedTime: 'Est. time',
      deployedCount: 'Deployed',
      viewDetails: 'View Details',
      startDeploy: 'Start Deployment',
      requiredDevices: 'Required Devices',
      productDetails: 'Product Details',
      deploymentPartners: 'Deployment Partners',
      partnersDescription: 'The following partners can provide on-site deployment services for this solution.',
      contactPartner: 'Contact',
      visitWebsite: 'Website',
      becomePartner: 'Become a Partner',
      partnerRegisterHint: 'Registered partners will be featured on Seeed Studio solution pages',
      // Device Configurator
      quickStart: 'Solution Description',
      orCustomize: 'or customize',
      selectedDevices: 'Selected Devices',
    },
    deploy: {
      title: 'Deploy',
      back: 'Back to Solutions',
      devices: 'Devices',
      viewWiki: 'View Full Wiki Documentation',
      selectMode: 'Select Deployment Mode',
      selectModeDesc: 'Choose one of the following deployment options',
      deviceStatus: {
        detected: 'Detected',
        notDetected: 'Not Detected',
        manualRequired: 'Manual Config',
        deploying: 'Deploying...',
        completed: 'Completed',
        failed: 'Failed',
      },
      status: {
        pending: 'Pending',
        ready: 'Ready',
        running: 'Deploying...',
        completed: 'Completed',
        failed: 'Failed',
      },
      actions: {
        detect: 'Detect Device',
        deploy: 'Deploy Now',
        retry: 'Retry',
        viewLogs: 'View Logs',
        markDone: 'Mark as Done',
        manual: 'Manual Step',
        auto: 'Automated Deployment',
        manualDesc: 'Complete the steps above, then click the button to mark as done.',
        autoDesc: 'Click the button below to automatically deploy this component.',
      },
      connection: {
        title: 'Connection Settings',
        host: 'Host / IP Address',
        port: 'Port',
        username: 'Username',
        password: 'Password',
        connect: 'Connect',
        test: 'Test Connection',
        selectPort: 'Select Port',
        refreshPorts: 'Refresh',
        scan: 'Scan',
        scanning: 'Scanning...',
        discoveredDevices: 'Discovered Devices',
        noDevicesFound: 'No devices found',
        suggestedHosts: 'Suggested Addresses',
        suggestedHostsHint: 'Common .local addresses you can try:',
        scanHint: 'Scan local network for devices',
      },
      progress: {
        title: 'Deployment Progress',
        pending: 'Pending',
        running: 'Running',
        completed: 'Completed',
        failed: 'Failed',
      },
      logs: {
        title: 'Logs',
        clear: 'Clear',
        download: 'Download',
        empty: 'No logs yet',
        starting: 'Starting deployment...',
        detailed: 'Detailed',
      },
      postInstructions: 'After Deployment',
      wiring: {
        title: 'Wiring Instructions',
      },
      models: {
        title: 'Select Models to Flash',
        description: 'Choose which AI models to flash with the base firmware',
        required: 'Required',
      },
      docker: {
        notInstalled: 'Docker Not Installed',
        installHint: 'This will automatically install Docker on the remote device. The process may take a few minutes.',
        installAction: 'Install Docker',
        fixPermissionAction: 'Fix Permission',
        startAction: 'Start Docker',
        fixAction: 'Fix Issue',
        installing: 'Installing Docker on remote device...',
        installCancelled: 'Docker installation cancelled by user',
      },
      warnings: {
        serviceSwitch: 'Deploying this application will stop any currently running applications on the device.',
        recameraSwitch: 'Deploying will stop the currently running application on reCamera to free up resources.',
        confirmDeploy: 'The current application will be stopped. Continue?',
        presetDisabled: 'This solution preset is under development and not yet ready for deployment.',
      },
      postDeployment: {
        title: 'Deployment Complete',
        nextSteps: 'Next Steps',
      },
    },
    deployments: {
      title: 'Deployment History',
      empty: 'No deployments yet',
      emptyDescription: 'Deploy a solution to see deployment history',
      stats: {
        total: 'Total',
        success: 'Success',
        failed: 'Failed',
      },
      status: {
        pending: 'Pending',
        running: 'Running',
        completed: 'Completed',
        failed: 'Failed',
        cancelled: 'Cancelled',
      },
      steps: {
        pending: 'Pending',
        running: 'Running',
        completed: 'Done',
        failed: 'Failed',
        skipped: 'Skipped',
      },
      times: 'times',
    },
    devices: {
      title: 'Device Management',
      subtitle: 'Manage deployed applications and remote Docker devices',
      empty: 'No deployed applications',
      emptyDescription: 'Deploy a solution first to manage it here',
      deployedApps: 'Deployed Applications',
      status: {
        running: 'Running',
        stopped: 'Stopped',
        unknown: 'Unknown',
      },
      actions: {
        update: 'Update',
        restart: 'Restart',
        start: 'Start',
        stop: 'Stop',
        delete: 'Delete',
        refresh: 'Refresh',
        confirmDelete: 'Are you sure you want to delete this deployment record?',
        deleted: 'Deployment record deleted',
        remove: 'Remove',
        confirmRemove: 'Remove Application',
        confirmRemoveMessage: 'Are you sure you want to remove this application? This will stop and delete all containers.',
        removeWithImages: 'Also remove Docker images',
        removeWithImagesHint: 'Only removes images not used by other containers',
        removeWithVolumes: 'Also delete data (volumes)',
        removeWithVolumesHint: 'Warning: This will permanently delete all application data',
        removing: 'Removing...',
        removed: 'Application removed',
        pruneImages: 'Clean Unused Images',
        pruneImagesHint: 'Remove all Docker images not used by any container',
        pruning: 'Cleaning...',
        pruned: 'Cleanup complete',
        confirmPrune: 'Clean Unused Images',
        confirmPruneMessage: 'This will remove all Docker images not currently used by any container. This action cannot be undone.',
      },
      connectFirst: 'Connect to a device first',
      connectFirstDesc: 'Enter SSH credentials above to connect to a remote Docker device',
      noManagedApps: 'No managed applications found',
      noManagedAppsDesc: 'Applications deployed through this platform will appear here',
      containers: 'containers',
      mode: {
        local: 'Local',
        remote: 'Remote',
        embedded: 'Embedded',
      },
      docker: {
        title: 'Remote Docker Device',
        localTitle: 'Local Docker',
        remoteTitle: 'Remote Docker Device',
        containers: 'Containers',
        connected: 'Connected successfully',
        connectionFailed: 'Connection failed',
        notAvailable: 'Docker not available',
        installDocker: 'Please install Docker to manage local containers',
        noContainers: 'No containers found on this device',
        containerName: 'Name',
        image: 'Image',
        version: 'Tag',
        status: 'Status',
        actions: 'Actions',
        ports: 'Ports',
        containerStatus: {
          running: 'Running',
          exited: 'Exited',
          stopped: 'Stopped',
        },
      },
      kiosk: {
        title: 'Kiosk Mode',
        enabled: 'Kiosk Enabled',
        disabled: 'Kiosk Disabled',
        enable: 'Enable Kiosk',
        disable: 'Disable Kiosk',
        user: 'Kiosk User',
        configuring: 'Configuring...',
        rebootRequired: 'Reboot required to apply',
      },
      update: {
        updating: 'Updating...',
        success: 'Update successful',
        failed: 'Update failed',
      },
      password: {
        title: 'SSH Password Required',
        description: 'Enter SSH password for remote device',
        submit: 'Submit',
      },
      openApp: 'Open App',
      restore: {
        title: 'Device Restore',
        subtitle: 'Restore embedded devices to factory state',
        selectDevice: 'Select Device Type',
        selectPort: 'Select Serial Port',
        enterSsh: 'Enter SSH Connection',
        host: 'Host / IP Address',
        username: 'Username',
        password: 'Password',
        startRestore: 'Restore to Factory',
        restoring: 'Restoring...',
        status: {
          pending: 'Pending',
          running: 'Running',
          completed: 'Completed',
          failed: 'Failed',
        },
        progress: 'Progress',
        logs: 'Logs',
        success: 'Device restored successfully',
        failed: 'Restore failed',
        noPortsFound: 'No serial ports found',
        refreshPorts: 'Refresh Ports',
        watcherHint: 'Connect Watcher via USB, select port, then click restore. ESP32 and Himax firmware will be restored automatically.',
        recameraHint: 'Enter SSH credentials to connect to reCamera and restore factory state.',
      },
    },
    settings: {
      title: 'System Settings',
      language: 'Language',
      theme: 'Theme',
      about: 'About',
      version: 'Version',
    },
    management: {
      title: 'Solution Management',
      subtitle: 'Create, edit, and delete solutions',
      newSolution: 'New Solution',
      editSolution: 'Edit Solution',
      deleteSolution: 'Delete Solution',
      tabs: {
        basicInfo: 'Basic Info',
        presets: 'Presets',
        files: 'Files',
        contentFiles: 'Content Files',
        assets: 'Assets',
        preview: 'Preview',
      },
      table: {
        id: 'ID',
        name: 'Name',
        category: 'Category',
        difficulty: 'Difficulty',
        status: 'Status',
        actions: 'Actions',
      },
      status: {
        enabled: 'Enabled',
        disabled: 'Disabled',
        clickToEnable: 'Click to enable',
        clickToDisable: 'Click to disable',
      },
      form: {
        basicInfo: 'Basic Information',
        id: 'Solution ID',
        idHint: 'Lowercase letters, numbers, underscore. Cannot be changed after creation.',
        nameEn: 'Name (English)',
        nameZh: 'Name (Chinese)',
        summaryEn: 'Summary (English)',
        summaryZh: 'Summary (Chinese)',
        category: 'Category',
        difficulty: 'Difficulty',
        estimatedTime: 'Estimated Time',
        files: 'File Uploads',
        coverImage: 'Cover Image',
        descEn: 'Description (English)',
        descZh: 'Description (Chinese)',
        guideEn: 'Deploy Guide (English)',
        guideZh: 'Deploy Guide (Chinese)',
        dropOrClick: 'Drop file here or click to select',
        uploaded: 'Uploaded',
        tags: 'Tags',
        addTag: 'Add tag...',
        links: 'External Links',
        type: 'Type',
        sectionTitle: 'Section Title',
        sectionTitleZh: 'Section Title (Chinese)',
        descFile: 'Description File',
        descFileZh: 'Description File (Chinese)',
      },
      actions: {
        edit: 'Edit',
        delete: 'Delete',
        save: 'Save',
        cancel: 'Cancel',
        create: 'Create',
        close: 'Close',
        saveLinks: 'Save Links',
      },
      presets: {
        title: 'Deployment Presets',
        add: 'Add Preset',
        edit: 'Edit Preset',
        empty: 'No presets defined',
        default: 'Default',
        setDefault: 'Set as default preset',
        steps: 'Deployment Steps',
        addStep: 'Add Step',
        editStep: 'Edit Step',
        noSteps: 'No steps defined',
        required: 'Required step',
        sectionFiles: 'Section Configuration',
      },
      files: {
        title: 'Solution Files',
        upload: 'Upload File',
        edit: 'Edit File',
        empty: 'No files found',
        path: 'File Path',
        pathHint: 'Relative path within solution directory',
        selectFile: 'Select File',
        exists: 'File exists',
        missing: 'File not found',
      },
      contentFiles: {
        title: 'Content Files',
        subtitle: 'Upload the 4 required markdown files for your solution',
        deployGuides: 'Deploy Guides',
        deployGuidesDesc: 'Step-by-step deployment instructions',
        introPages: 'Introduction Pages',
        introPagesDesc: 'Solution description for the intro page',
        upload: 'Upload',
        edit: 'Edit',
        view: 'View',
        required: 'Required',
        matched: 'Structure matched',
        missing: 'File missing',
        exists: 'Present',
        present: 'Present',
        guideFiles: 'guide.md / guide_zh.md',
        descFiles: 'description.md / description_zh.md',
        noGuides: 'No guide files found',
        enOnly: 'Only English guide found',
        validated: 'Guide structure validated',
        presetStepsSummary: '{summary}',
        errorCount: '{count} validation error(s)',
        presetsFound: '{count} presets found',
      },
      preview: {
        title: 'Structure Preview',
        subtitle: 'Structure parsed from guide.md',
        presets: 'Deploy Presets',
        steps: 'Steps',
        targets: 'Targets',
        postDeployment: 'Post-Deployment',
        successMessage: 'Success Message',
        nextSteps: 'Next Steps',
        noPresets: 'No deploy presets found in guide.md',
        addGuide: 'Upload guide.md to see structure here',
        default: 'Default',
        required: 'Required',
        defaultTarget: 'Default target',
        refresh: 'Refresh',
        loadError: 'Failed to load preview',
        validation: 'Validation',
        validationPassed: 'EN/ZH structure matched',
        validationFailed: 'EN/ZH structure mismatch',
      },
      devices: {
        title: 'Required Devices',
        subtitle: 'Select devices needed for this solution (shown on intro page)',
        addDevice: 'Add Device',
        searchDevices: 'Search devices...',
        catalog: 'Device Catalog',
        noDevices: 'No devices selected',
        selectFromCatalog: 'Select from catalog',
        selectFirst: 'Please select a device first',
        alreadyAdded: 'Device already added',
      },
      confirm: {
        deleteTitle: 'Confirm Delete',
        deleteMessage: 'Are you sure you want to delete this solution? It will be moved to trash.',
        deletePermanent: 'Delete permanently (cannot be recovered)',
        deletePreset: 'Are you sure you want to delete this preset?',
        deleteStep: 'Are you sure you want to delete this step?',
        deleteFile: 'Are you sure you want to delete this file?',
      },
      messages: {
        createSuccess: 'Solution created successfully',
        updateSuccess: 'Solution updated successfully',
        deleteSuccess: 'Solution deleted successfully',
        uploadSuccess: 'File uploaded successfully',
        createError: 'Failed to create solution',
        updateError: 'Failed to update solution',
        deleteError: 'Failed to delete solution',
        uploadError: 'Failed to upload file',
        invalidId: 'Invalid solution ID. Use lowercase letters, numbers, underscore. Must start with a letter.',
        tagAdded: 'Tag added',
        tagRemoved: 'Tag removed',
        tagExists: 'Tag already exists',
        linksSaved: 'Links saved',
        presetAdded: 'Preset added',
        presetUpdated: 'Preset updated',
        presetDeleted: 'Preset deleted',
        stepAdded: 'Step added',
        stepUpdated: 'Step updated',
        stepDeleted: 'Step deleted',
        fileDeleted: 'File deleted',
        fileSaved: 'File saved',
        requiredFields: 'Please fill in all required fields',
        contentFileSaved: 'Content file saved',
        contentFileError: 'Failed to save content file',
        presetsSynced: 'Presets synced from guide',
        devicesUpdated: 'Required devices updated',
        solutionEnabled: 'Solution enabled',
        solutionDisabled: 'Solution disabled',
      },
      categories: {
        general: 'General',
        voice_ai: 'Voice AI',
        sensing: 'Sensing',
        automation: 'Automation',
        vision: 'Vision',
        smart_building: 'Smart Building',
        industrial_iot: 'Industrial IoT',
      },
      validation: {
        title: 'Guide Structure Validation',
        allPassed: 'All checks passed',
        errorCount: '{count} validation error(s) found',
        loadError: 'Failed to load validation',
        presetsMatched: '{count} presets matched',
        stepsMatched: '{count} steps matched',
        presetCountMismatch: 'Preset count mismatch',
        presetIdMismatch: 'Preset ID mismatch',
        stepCountMismatch: 'Step count mismatch',
        stepIdMismatch: 'Step ID mismatch',
        stepTypeMismatch: 'Step type mismatch',
        stepRequiredMismatch: 'Step required mismatch',
        stepConfigMismatch: 'Step config mismatch',
        noGuideFiles: 'No guide files found',
        enOnly: 'Only English guide found',
        zhOnly: 'Only Chinese guide found',
      },
    },
    preview: {
      title: 'Live Preview',
      description: 'View live video stream with inference results overlay.',
      status: {
        disconnected: 'Disconnected',
        connecting: 'Connecting...',
        connected: 'Connected',
        error: 'Connection Error',
      },
      actions: {
        connect: 'Start Preview',
        disconnect: 'Stop Preview',
      },
      connected: 'Preview connected',
      connectionFailed: 'Preview connection failed',
      inputs: {
        rtspUrl: 'RTSP Stream URL',
        rtspUrlDesc: 'URL of the RTSP video stream',
        mqttBroker: 'MQTT Broker',
        mqttBrokerDesc: 'MQTT broker hostname or IP address',
        mqttPort: 'MQTT Port',
        mqttTopic: 'MQTT Topic',
        mqttTopicDesc: 'Topic to subscribe for inference results',
      },
    },
    serialCamera: {
      connect: 'Connect',
      disconnect: 'Disconnect',
      clickConnect: 'Click Connect to start camera',
      noPreview: 'No image preview (face detection active)',
      enrolling: 'Enrolling',
      portMissing: 'Please complete "{step}" first to select the serial port',
      portsReady: 'Ports ready',
      camera: 'Camera',
      database: 'Database',
      status: {
        disconnected: 'Disconnected',
        connecting: 'Connecting...',
        connected: 'Connected',
        error: 'Error',
      },
    },
    faceDatabase: {
      title: 'Face Database',
      register: 'Register',
      name: 'Name',
      nameColumn: 'Name',
      actionsColumn: 'Actions',
      namePlaceholder: 'Enter name',
      startCapture: 'Start Capture',
      capturing: 'Capturing...',
      capturingStatus: '{samples}/{minSamples} samples ({seconds}s remaining)',
      enrolled: '{count}/{max} faces enrolled',
      empty: 'No faces enrolled yet',
      deleteConfirm: 'Delete "{name}"?',
      renamePrompt: 'New name for "{name}":',
      rename: 'Rename',
      delete: 'Delete',
      enrollSuccess: '"{name}" enrolled successfully',
      enrollFailed: 'Enrollment failed: {error}',
    },
    common: {
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
      cancel: 'Cancel',
      confirm: 'Confirm',
      save: 'Save',
      close: 'Close',
      retry: 'Retry',
      next: 'Next',
      previous: 'Previous',
    },
    updater: {
      title: 'Update Available',
      updateAvailable: 'Version {version} is available',
      viewUpdate: 'View',
      newVersion: 'New Version',
      releaseNotes: 'Release Notes',
      downloadInstall: 'Download & Install',
      downloading: 'Downloading...',
      downloadComplete: 'Download complete. Restart to apply update.',
      downloadFailed: 'Download failed. Please try again.',
      restartNow: 'Restart Now',
      later: 'Later',
      retry: 'Retry',
      noUpdates: 'You are on the latest version',
      checkFailed: 'Failed to check for updates',
      checkingUpdates: 'Checking for updates...',
    },
  },
  zh: {
    app: {
      title: 'SenseCraft 解决方案',
    },
    nav: {
      solutions: '解决方案',
      devices: '设备管理',
      deployments: '部署记录',
      management: '方案管理',
      settings: '系统设置',
    },
    solutions: {
      title: '可用方案',
      empty: '暂无可用方案',
      emptyDescription: '请在 solutions 目录中添加方案配置',
      difficulty: {
        beginner: '入门',
        intermediate: '中级',
        advanced: '高级',
      },
      estimatedTime: '预计时间',
      deployedCount: '已部署',
      viewDetails: '查看详情',
      startDeploy: '开始部署',
      requiredDevices: '所需设备',
      productDetails: '产品详情',
      deploymentPartners: '部署合作伙伴',
      partnersDescription: '以下合作伙伴可为本方案提供现场部署服务。',
      contactPartner: '联系方式',
      visitWebsite: '访问官网',
      becomePartner: '成为合作伙伴',
      partnerRegisterHint: '已注册合作伙伴将有机会显示在矽递解决方案宣传页',
      // Device Configurator
      quickStart: '方案说明',
      orCustomize: '或自定义选择',
      selectedDevices: '已选设备',
    },
    deploy: {
      title: '部署',
      back: '返回方案列表',
      devices: '设备',
      viewWiki: '查看完整Wiki文档',
      selectMode: '选择部署方式',
      selectModeDesc: '请选择以下一种部署方式',
      deviceStatus: {
        detected: '已检测',
        notDetected: '未检测到',
        manualRequired: '需手动配置',
        deploying: '部署中...',
        completed: '已完成',
        failed: '失败',
      },
      status: {
        pending: '待处理',
        ready: '就绪',
        running: '部署中...',
        completed: '已完成',
        failed: '失败',
      },
      actions: {
        detect: '检测设备',
        deploy: '立即部署',
        retry: '重试',
        viewLogs: '查看日志',
        markDone: '标记完成',
        manual: '手动步骤',
        auto: '自动部署',
        manualDesc: '完成上述步骤后，点击按钮标记为完成。',
        autoDesc: '点击下方按钮自动部署此组件。',
      },
      connection: {
        title: '连接设置',
        host: '主机 / IP 地址',
        port: '端口',
        username: '用户名',
        password: '密码',
        connect: '连接',
        test: '测试连接',
        selectPort: '选择端口',
        refreshPorts: '刷新',
        scan: '扫描',
        scanning: '扫描中...',
        discoveredDevices: '发现的设备',
        noDevicesFound: '未发现设备',
        suggestedHosts: '推荐地址',
        suggestedHostsHint: '您可以尝试以下常用 .local 地址：',
        scanHint: '扫描局域网内的设备',
      },
      progress: {
        title: '部署进度',
        pending: '等待中',
        running: '进行中',
        completed: '已完成',
        failed: '失败',
      },
      logs: {
        title: '日志',
        clear: '清空',
        download: '下载',
        empty: '暂无日志',
        starting: '开始部署...',
        detailed: '详细',
      },
      postInstructions: '部署后操作',
      wiring: {
        title: '接线说明',
      },
      models: {
        title: '选择要烧录的模型',
        description: '选择要与基础固件一起烧录的 AI 模型',
        required: '必需',
      },
      docker: {
        notInstalled: '未检测到 Docker',
        installHint: '将自动在远程设备上安装 Docker，此过程可能需要几分钟。',
        installAction: '安装 Docker',
        fixPermissionAction: '修复权限',
        startAction: '启动 Docker',
        fixAction: '修复问题',
        installing: '正在远程设备上安装 Docker...',
        installCancelled: '用户取消了 Docker 安装',
      },
      warnings: {
        serviceSwitch: '部署此应用将会停止设备上当前正在运行的应用。',
        recameraSwitch: '部署新应用将停止 reCamera 上当前运行的应用以释放资源。',
        confirmDeploy: '当前应用将被停止。是否继续？',
        presetDisabled: '此方案预设正在开发中，暂时无法部署。',
      },
      postDeployment: {
        title: '部署完成',
        nextSteps: '下一步操作',
      },
    },
    deployments: {
      title: '部署历史',
      empty: '暂无部署记录',
      emptyDescription: '部署一个方案后将在此显示历史记录',
      stats: {
        total: '总计',
        success: '成功',
        failed: '失败',
      },
      status: {
        pending: '等待中',
        running: '进行中',
        completed: '已完成',
        failed: '失败',
        cancelled: '已取消',
      },
      steps: {
        pending: '等待',
        running: '进行中',
        completed: '完成',
        failed: '失败',
        skipped: '跳过',
      },
      times: '次',
    },
    devices: {
      title: '设备管理',
      subtitle: '管理已部署应用和远程 Docker 设备',
      empty: '暂无已部署应用',
      emptyDescription: '请先部署一个方案，然后在此管理',
      deployedApps: '已部署应用',
      status: {
        running: '运行中',
        stopped: '已停止',
        unknown: '未知',
      },
      actions: {
        update: '更新',
        restart: '重启',
        start: '启动',
        stop: '停止',
        delete: '删除',
        refresh: '刷新',
        confirmDelete: '确定删除此部署记录？',
        deleted: '已删除部署记录',
        remove: '移除',
        confirmRemove: '移除应用',
        confirmRemoveMessage: '确定要移除此应用吗？这将停止并删除所有容器。',
        removeWithImages: '同时删除 Docker 镜像',
        removeWithImagesHint: '只删除未被其他容器使用的镜像',
        removeWithVolumes: '同时删除数据（卷）',
        removeWithVolumesHint: '警告：这将永久删除所有应用数据',
        removing: '移除中...',
        removed: '应用已移除',
        pruneImages: '清理未使用镜像',
        pruneImagesHint: '删除所有未被任何容器使用的 Docker 镜像',
        pruning: '清理中...',
        pruned: '清理完成',
        confirmPrune: '清理未使用镜像',
        confirmPruneMessage: '这将删除所有未被任何容器使用的 Docker 镜像。此操作无法撤销。',
      },
      connectFirst: '请先连接设备',
      connectFirstDesc: '在上方输入 SSH 凭据以连接到远程 Docker 设备',
      noManagedApps: '未找到已部署的应用',
      noManagedAppsDesc: '通过本平台部署的应用将在此显示',
      containers: '个容器',
      mode: {
        local: '本机',
        remote: '远程',
        embedded: '嵌入式',
      },
      docker: {
        title: '远程 Docker 设备',
        localTitle: '本机 Docker',
        remoteTitle: '远程 Docker 设备',
        containers: '容器列表',
        connected: '连接成功',
        connectionFailed: '连接失败',
        notAvailable: 'Docker 不可用',
        installDocker: '请安装 Docker 以管理本地容器',
        noContainers: '该设备上未找到容器',
        containerName: '名称',
        image: '镜像',
        version: '标签',
        status: '状态',
        actions: '操作',
        ports: '端口',
        containerStatus: {
          running: '运行中',
          exited: '已退出',
          stopped: '已停止',
        },
      },
      kiosk: {
        title: 'Kiosk 模式',
        enabled: 'Kiosk 已启用',
        disabled: 'Kiosk 已禁用',
        enable: '启用 Kiosk',
        disable: '禁用 Kiosk',
        user: 'Kiosk 用户',
        configuring: '配置中...',
        rebootRequired: '需要重启生效',
      },
      update: {
        updating: '更新中...',
        success: '更新成功',
        failed: '更新失败',
      },
      password: {
        title: '需要 SSH 密码',
        description: '请输入远程设备的 SSH 密码',
        submit: '提交',
      },
      openApp: '打开应用',
      restore: {
        title: '设备还原',
        subtitle: '将嵌入式设备恢复到出厂状态',
        selectDevice: '选择设备类型',
        selectPort: '选择串口',
        enterSsh: '输入 SSH 连接信息',
        host: '主机 / IP 地址',
        username: '用户名',
        password: '密码',
        startRestore: '恢复出厂设置',
        restoring: '正在还原...',
        status: {
          pending: '等待中',
          running: '进行中',
          completed: '已完成',
          failed: '失败',
        },
        progress: '进度',
        logs: '日志',
        success: '设备还原成功',
        failed: '还原失败',
        noPortsFound: '未找到串口',
        refreshPorts: '刷新串口',
        watcherHint: '通过 USB 连接 Watcher，选择串口后点击还原。ESP32 和 Himax 固件将自动恢复。',
        recameraHint: '输入 SSH 凭据连接到 reCamera 并恢复出厂状态。',
      },
    },
    settings: {
      title: '系统设置',
      language: '语言',
      theme: '主题',
      about: '关于',
      version: '版本',
    },
    management: {
      title: '方案管理',
      subtitle: '创建、编辑和删除方案',
      newSolution: '新建方案',
      editSolution: '编辑方案',
      deleteSolution: '删除方案',
      tabs: {
        basicInfo: '基本信息',
        presets: '预设套餐',
        files: '文件资源',
        contentFiles: '内容文件',
        assets: '资源文件',
        preview: '结构预览',
      },
      table: {
        id: 'ID',
        name: '名称',
        category: '分类',
        difficulty: '难度',
        status: '状态',
        actions: '操作',
      },
      status: {
        enabled: '已启用',
        disabled: '已禁用',
        clickToEnable: '点击启用',
        clickToDisable: '点击禁用',
      },
      form: {
        basicInfo: '基本信息',
        id: '方案 ID',
        idHint: '小写字母、数字、下划线，创建后不可修改。',
        nameEn: '名称（英文）',
        nameZh: '名称（中文）',
        summaryEn: '摘要（英文）',
        summaryZh: '摘要（中文）',
        category: '分类',
        difficulty: '难度',
        estimatedTime: '预估时间',
        files: '文件上传',
        coverImage: '封面图片',
        descEn: '介绍（英文）',
        descZh: '介绍（中文）',
        guideEn: '部署指南（英文）',
        guideZh: '部署指南（中文）',
        dropOrClick: '拖拽文件到此处或点击选择',
        uploaded: '已上传',
        tags: '标签',
        addTag: '添加标签...',
        links: '外部链接',
        type: '类型',
        sectionTitle: '步骤标题',
        sectionTitleZh: '步骤标题（中文）',
        descFile: '说明文件',
        descFileZh: '说明文件（中文）',
      },
      actions: {
        edit: '编辑',
        delete: '删除',
        save: '保存',
        cancel: '取消',
        create: '创建',
        close: '关闭',
        saveLinks: '保存链接',
      },
      presets: {
        title: '部署套餐',
        add: '添加套餐',
        edit: '编辑套餐',
        empty: '暂无套餐',
        default: '默认',
        setDefault: '设为默认套餐',
        steps: '部署步骤',
        addStep: '添加步骤',
        editStep: '编辑步骤',
        noSteps: '暂无步骤',
        required: '必需步骤',
        sectionFiles: '步骤配置',
      },
      files: {
        title: '方案文件',
        upload: '上传文件',
        edit: '编辑文件',
        empty: '暂无文件',
        path: '文件路径',
        pathHint: '相对于方案目录的路径',
        selectFile: '选择文件',
        exists: '文件存在',
        missing: '文件不存在',
      },
      contentFiles: {
        title: '内容文件',
        subtitle: '上传方案所需的 4 个 Markdown 文件',
        deployGuides: '部署指南',
        deployGuidesDesc: '分步部署说明',
        introPages: '介绍页面',
        introPagesDesc: '介绍页的方案描述',
        upload: '上传',
        edit: '编辑',
        view: '查看',
        required: '必需',
        matched: '结构匹配',
        missing: '文件缺失',
        exists: '已有',
        present: '已有',
        guideFiles: 'guide.md / guide_zh.md',
        descFiles: 'description.md / description_zh.md',
        noGuides: '未找到 Guide 文件',
        enOnly: '仅找到英文 Guide',
        validated: 'Guide 结构验证通过',
        presetStepsSummary: '{summary}',
        errorCount: '{count} 个验证错误',
        presetsFound: '找到 {count} 个预设',
      },
      preview: {
        title: '结构预览',
        subtitle: '从 guide.md 解析的结构',
        presets: '部署组合',
        steps: '步骤',
        targets: '部署目标',
        postDeployment: '部署后',
        successMessage: '成功消息',
        nextSteps: '后续步骤',
        noPresets: '未在 guide.md 中找到部署组合',
        addGuide: '上传 guide.md 以在此查看结构',
        default: '默认',
        required: '必需',
        defaultTarget: '默认目标',
        refresh: '刷新',
        loadError: '加载预览失败',
        validation: '验证',
        validationPassed: '中英文结构匹配',
        validationFailed: '中英文结构不匹配',
      },
      devices: {
        title: '所需设备',
        subtitle: '选择此方案所需的设备（显示在介绍页）',
        addDevice: '添加设备',
        searchDevices: '搜索设备...',
        catalog: '设备目录',
        noDevices: '未选择设备',
        selectFromCatalog: '从目录选择',
        selectFirst: '请先选择一个设备',
        alreadyAdded: '设备已添加',
      },
      confirm: {
        deleteTitle: '确认删除',
        deleteMessage: '确定要删除此方案吗？将移动到回收站。',
        deletePermanent: '永久删除（无法恢复）',
        deletePreset: '确定要删除此套餐吗？',
        deleteStep: '确定要删除此步骤吗？',
        deleteFile: '确定要删除此文件吗？',
      },
      messages: {
        createSuccess: '方案创建成功',
        updateSuccess: '方案更新成功',
        deleteSuccess: '方案删除成功',
        uploadSuccess: '文件上传成功',
        createError: '创建方案失败',
        updateError: '更新方案失败',
        deleteError: '删除方案失败',
        uploadError: '上传文件失败',
        invalidId: '无效的方案 ID，请使用小写字母、数字和下划线，且必须以字母开头。',
        tagAdded: '标签已添加',
        tagRemoved: '标签已移除',
        tagExists: '标签已存在',
        linksSaved: '链接已保存',
        presetAdded: '套餐已添加',
        presetUpdated: '套餐已更新',
        presetDeleted: '套餐已删除',
        stepAdded: '步骤已添加',
        stepUpdated: '步骤已更新',
        stepDeleted: '步骤已删除',
        fileDeleted: '文件已删除',
        fileSaved: '文件已保存',
        requiredFields: '请填写所有必填字段',
        contentFileSaved: '内容文件已保存',
        contentFileError: '保存内容文件失败',
        presetsSynced: '预设已从指南同步',
        devicesUpdated: '所需设备已更新',
        solutionEnabled: '方案已启用',
        solutionDisabled: '方案已禁用',
      },
      categories: {
        general: '通用',
        voice_ai: '语音AI',
        sensing: '传感',
        automation: '自动化',
        vision: '视觉',
        smart_building: '智慧楼宇',
        industrial_iot: '工业物联网',
      },
      validation: {
        title: 'Guide 结构校验',
        allPassed: '所有检查通过',
        errorCount: '发现 {count} 个校验错误',
        loadError: '加载校验结果失败',
        presetsMatched: '{count} 个套餐匹配',
        stepsMatched: '{count} 个步骤匹配',
        presetCountMismatch: '套餐数量不匹配',
        presetIdMismatch: '套餐 ID 不匹配',
        stepCountMismatch: '步骤数量不匹配',
        stepIdMismatch: '步骤 ID 不匹配',
        stepTypeMismatch: '步骤类型不匹配',
        stepRequiredMismatch: '步骤必填属性不匹配',
        stepConfigMismatch: '步骤配置不匹配',
        noGuideFiles: '未找到 Guide 文件',
        enOnly: '仅找到英文 Guide',
        zhOnly: '仅找到中文 Guide',
      },
    },
    preview: {
      title: '实时预览',
      description: '查看实时视频流及推理结果叠加显示。',
      status: {
        disconnected: '未连接',
        connecting: '连接中...',
        connected: '已连接',
        error: '连接错误',
      },
      actions: {
        connect: '开始预览',
        disconnect: '停止预览',
      },
      connected: '预览已连接',
      connectionFailed: '预览连接失败',
      inputs: {
        rtspUrl: 'RTSP 视频流地址',
        rtspUrlDesc: 'RTSP 视频流的 URL 地址',
        mqttBroker: 'MQTT 服务器',
        mqttBrokerDesc: 'MQTT 服务器主机名或 IP 地址',
        mqttPort: 'MQTT 端口',
        mqttTopic: 'MQTT 主题',
        mqttTopicDesc: '订阅推理结果的主题',
      },
    },
    serialCamera: {
      connect: '连接',
      disconnect: '断开',
      clickConnect: '点击连接启动摄像头',
      noPreview: '无图像预览（人脸检测运行中）',
      enrolling: '注册中',
      portMissing: '请先完成「{step}」步骤选择串口',
      portsReady: '端口就绪',
      camera: '摄像头',
      database: '数据库',
      status: {
        disconnected: '未连接',
        connecting: '连接中...',
        connected: '已连接',
        error: '错误',
      },
    },
    faceDatabase: {
      title: '人脸数据库',
      register: '注册',
      name: '姓名',
      nameColumn: '姓名',
      actionsColumn: '操作',
      namePlaceholder: '输入姓名',
      startCapture: '开始采集',
      capturing: '采集中...',
      capturingStatus: '{samples}/{minSamples} 个样本（剩余 {seconds}s）',
      enrolled: '{count}/{max} 张人脸已注册',
      empty: '暂无注册人脸',
      deleteConfirm: '确定删除「{name}」？',
      renamePrompt: '「{name}」的新名称：',
      rename: '重命名',
      delete: '删除',
      enrollSuccess: '「{name}」注册成功',
      enrollFailed: '注册失败：{error}',
    },
    common: {
      loading: '加载中...',
      error: '错误',
      success: '成功',
      cancel: '取消',
      confirm: '确认',
      save: '保存',
      close: '关闭',
      retry: '重试',
      next: '下一步',
      previous: '上一步',
    },
    updater: {
      title: '发现新版本',
      updateAvailable: '版本 {version} 已可用',
      viewUpdate: '查看',
      newVersion: '新版本',
      releaseNotes: '更新日志',
      downloadInstall: '下载并安装',
      downloading: '下载中...',
      downloadComplete: '下载完成，重启以应用更新。',
      downloadFailed: '下载失败，请重试。',
      restartNow: '立即重启',
      later: '稍后',
      retry: '重试',
      noUpdates: '当前已是最新版本',
      checkFailed: '检查更新失败',
      checkingUpdates: '正在检查更新...',
    },
  },
};

class I18n {
  constructor() {
    this.currentLocale = this.getSavedLocale() || this.detectLocale();
    this.listeners = [];
  }

  getSavedLocale() {
    return localStorage.getItem('locale');
  }

  detectLocale() {
    const browserLang = navigator.language.split('-')[0];
    return browserLang === 'zh' ? 'zh' : 'en';
  }

  get locale() {
    return this.currentLocale;
  }

  set locale(newLocale) {
    if (newLocale !== this.currentLocale && translations[newLocale]) {
      this.currentLocale = newLocale;
      localStorage.setItem('locale', newLocale);
      this.notifyListeners();
      this.updateDOM();
    }
  }

  toggle() {
    this.locale = this.currentLocale === 'en' ? 'zh' : 'en';
  }

  t(key, params = {}) {
    const keys = key.split('.');
    let value = translations[this.currentLocale];

    for (const k of keys) {
      if (value && typeof value === 'object') {
        value = value[k];
      } else {
        return key; // Return key if translation not found
      }
    }

    if (typeof value === 'string' && Object.keys(params).length > 0) {
      return value.replace(/\{(\w+)\}/g, (_, paramKey) => params[paramKey] || '');
    }

    return value || key;
  }

  // Get localized field from an object (e.g., name vs name_zh)
  getLocalizedField(obj, field) {
    if (!obj) return '';
    const localizedKey = this.currentLocale === 'zh' ? `${field}_zh` : field;
    return obj[localizedKey] || obj[field] || '';
  }

  onLocaleChange(callback) {
    this.listeners.push(callback);
    return () => {
      this.listeners = this.listeners.filter(cb => cb !== callback);
    };
  }

  notifyListeners() {
    this.listeners.forEach(cb => cb(this.currentLocale));
  }

  updateDOM() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      el.textContent = this.t(key);
    });

    // Update all elements with data-i18n-placeholder attribute
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
      const key = el.getAttribute('data-i18n-placeholder');
      el.placeholder = this.t(key);
    });

    // Update all elements with data-i18n-title attribute
    document.querySelectorAll('[data-i18n-title]').forEach(el => {
      const key = el.getAttribute('data-i18n-title');
      el.title = this.t(key);
    });

    // Update HTML lang attribute
    document.documentElement.lang = this.currentLocale;
  }
}

// Export singleton instance
export const i18n = new I18n();
export const t = (key, params) => i18n.t(key, params);
export const getLocalizedField = (obj, field) => i18n.getLocalizedField(obj, field);
