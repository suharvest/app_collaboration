version: "1.0"
id: display_local
name: Display Service (Local)
name_zh: 投屏服务（本机）
type: docker_local

detection:
  method: local
  requirements:
    - docker_installed
    - docker_running

user_inputs:
  - id: device_name
    name: Display Name
    name_zh: 显示名称
    type: text
    default: "Xiaozhi Display"
    required: false
    placeholder: "Living Room Display"
    description: Device name shown in mDNS discovery and Web UI
    description_zh: 在 mDNS 设备发现和 Web 界面显示的名称

docker:
  compose_file: assets/docker/docker-compose.yml

  environment:
    TZ: Asia/Shanghai
    RD_DEVICE_NAME: "{{device_name}}"
    # Audio plays via browser by default, set RD_LOCAL_AUDIO=1 for server-side audio
    RD_LOCAL_AUDIO: "0"

  options:
    project_name: xiaozhi_display
    remove_orphans: true

  services:
    - name: xiaozhi-display
      port: 8765
      health_check_endpoint: /
      required: true

pre_checks:
  - type: docker_version
    min_version: "20.0"
    description: Check Docker version

post_deployment:
  open_browser: true
  url: "http://localhost:8765"
