version: "1.0"
id: preview_heatmap
name: Heatmap Preview
name_zh: 热力图预览
type: preview

# 视频流配置
video:
  type: rtsp_proxy
  rtsp_url_template: "{{rtsp_url}}"

# MQTT 配置
mqtt:
  broker_template: "{{mqtt_broker}}"
  port_template: "{{mqtt_port}}"
  topic_template: "{{mqtt_topic}}"
  username_template: "{{mqtt_username}}"
  password_template: "{{mqtt_password}}"

# 叠加层配置
overlay:
  renderer: custom
  script_file: preview/draw_heatmap.js
  dependencies:
    - lib/simpleheat.js

# 显示配置
display:
  aspect_ratio: "16:9"
  auto_start: false
  show_stats: true

# 用户输入
user_inputs:
  - id: rtsp_url
    name: RTSP URL
    name_zh: RTSP 地址
    type: text
    required: true
    default: "rtsp://192.168.42.1:8554/live0"
    placeholder: "rtsp://192.168.42.1:8554/live0"
    description: Video stream address
    description_zh: 视频流地址

  - id: mqtt_broker
    name: MQTT Broker
    name_zh: MQTT 服务器
    type: text
    required: true
    default: "192.168.42.1"
    placeholder: "192.168.42.1"
    description: MQTT broker address
    description_zh: MQTT 服务器地址

  - id: mqtt_port
    name: MQTT Port
    name_zh: MQTT 端口
    type: text
    required: false
    default: "1883"
    placeholder: "1883"

  - id: mqtt_topic
    name: MQTT Topic
    name_zh: MQTT 主题
    type: text
    required: false
    default: "recamera/yolo26/detections"
    placeholder: "recamera/yolo26/detections"

  - id: mqtt_username
    name: MQTT Username
    name_zh: MQTT 用户名
    type: text
    required: false
    placeholder: "(optional)"

  - id: mqtt_password
    name: MQTT Password
    name_zh: MQTT 密码
    type: password
    required: false
    placeholder: "(optional)"
