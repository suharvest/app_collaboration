# 边缘计算方案配置模板
# VAD/ASR 在 R1100 本地，LLM/TTS 在 Jetson J4012

server:
  ip: 0.0.0.0
  port: 8000
  http_port: 8003
  websocket: ws://{{R1100_IP}}:18000/xiaozhi/v1/

selected_module:
  VAD: SileroVAD
  ASR: SherpaASR
  LLM: JetsonLLM           # Jetson MLC LLM
  TTS: RemoteTTSStream     # Jetson Kokoro TTS 流式
  Memory: nomem
  Intent: function_call

VAD:
  SileroVAD:
    type: silero
    threshold: 0.5
    model_dir: models/snakers4_silero-vad

ASR:
  SherpaASR:
    type: sherpa_onnx_local
    model_dir: models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17
    output_dir: tmp/
    model_type: sense_voice

LLM:
  JetsonLLM:
    type: openai
    base_url: http://{{JETSON_IP}}:8000/v1   # MLC LLM 服务
    model_name: qwen3:8b
    api_key: mlc
    max_tokens: 512
    temperature: 0.7

TTS:
  RemoteTTSStream:
    type: remote_tts_stream
    base_url: http://{{JETSON_IP}}:8000     # Kokoro TTS 服务
    sid: 50                                  # Kokoro 说话人 ID
    speed: 1.0
    timeout: 30
    output_dir: tmp/

Intent:
  function_call:
    type: function_call
    functions:
      - get_weather
      - get_lunar

mcp_endpoint: ws://mcp-endpoint:8004/mcp_endpoint/mcp/?token={{MCP_TOKEN}}
delete_audio: true
close_connection_no_voice_time: 120

prompt: |
  你是小智，一个智能仓库管理语音助手。你可以帮助用户查询库存、记录入库出库等操作。
  请用简洁的语言回答问题。
