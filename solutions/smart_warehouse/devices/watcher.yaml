version: "1.0"
id: watcher
name: SenseCAP Watcher
name_zh: SenseCAP Watcher
type: esp32_usb

detection:
  method: usb_serial
  # Watcher uses WCH USB-UART chip
  usb_vendor_id: "0x1a86"
  usb_product_id: "0x55d2"
  fallback_ports:
    - /dev/tty.wchusbserial*
    - /dev/cu.wchusbserial*
    - /dev/ttyUSB*
    - /dev/ttyACM*

firmware:
  source:
    type: local
    path: assets/watcher_firmware/firmware.bin

  flash_config:
    chip: esp32s3
    baud_rate: 921600
    flash_mode: dio
    flash_freq: 80m
    flash_size: 32MB
    partitions:
      - name: app
        offset: "0x10000"
        file: firmware.bin

pre_checks:
  - type: esptool_version
    min_version: "4.0"
    description: Check esptool is installed
  - type: port_available
    description: Check if serial port is accessible

post_deployment:
  reset_device: true
  wait_for_ready: 5
