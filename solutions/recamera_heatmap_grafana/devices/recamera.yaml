version: "1.0"
id: recamera
name: reCamera Node-RED Configuration
name_zh: reCamera Node-RED 配置

type: recamera_nodered

detection:
  method: network_scan
  manual_entry: true
  requirements: []

nodered:
  flow_file: flow.json
  port: 1880
  influxdb_node_id: "069087e0ad1b172e"

user_inputs:
  - id: recamera_ip
    name: reCamera IP Address
    name_zh: reCamera IP 地址
    type: text
    default: "192.168.42.1"
    placeholder: "192.168.42.1"
    description: IP address of your reCamera device
    description_zh: 您的 reCamera 设备 IP 地址
    required: true
    validation:
      pattern: "^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"

  - id: influxdb_host
    name: InfluxDB Server IP
    name_zh: InfluxDB 服务器 IP
    type: text
    placeholder: "192.168.1.100"
    description: IP address of InfluxDB server (from Step 1)
    description_zh: InfluxDB 服务器 IP 地址（来自步骤 1）
    required: true
    validation:
      pattern: "^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"

# Fixed configuration - no user input needed
influxdb:
  token: "recamera-heatmap-token"
  org: "seeed"
  bucket: "recamera"
  port: 8086

steps:
  - id: load_flow
    name: Load flow template
    name_zh: 加载流程模板
  - id: configure
    name: Configure InfluxDB connection
    name_zh: 配置 InfluxDB 连接
  - id: connect
    name: Connect to Node-RED
    name_zh: 连接到 Node-RED
  - id: deploy
    name: Deploy flow
    name_zh: 部署流程
  - id: verify
    name: Verify deployment
    name_zh: 验证部署

post_deployment:
  open_browser: false
